# Let's Encrypt Certificate Issuers for cert-manager
# 
# This creates two ClusterIssuers:
# 1. letsencrypt-staging - For testing (higher rate limits, fake certificates)
# 2. letsencrypt-prod - For production (real certificates, lower rate limits)
#
# Usage:
# 1. Test with staging issuer first to avoid rate limits
# 2. Once verified, switch to production issuer
# 3. Update email address before applying
#
# Apply: kubectl apply -f cluster-issuer.yaml
# Verify: kubectl get clusterissuer

---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-staging
spec:
  acme:
    # Let's Encrypt Staging Server (for testing)
    server: https://acme-staging-v02.api.letsencrypt.org/directory
    
    # IMPORTANT: Update this email address
    email: your-email@example.com
    
    # Secret to store the ACME account private key
    privateKeySecretRef:
      name: letsencrypt-staging
    
    # HTTP-01 challenge solver
    # cert-manager will create temporary Ingress resources for validation
    solvers:
    - http01:
        ingress:
          class: nginx

---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
spec:
  acme:
    # Let's Encrypt Production Server
    server: https://acme-v02.api.letsencrypt.org/directory
    
    # IMPORTANT: Update this email address
    email: your-email@example.com
    
    # Secret to store the ACME account private key
    privateKeySecretRef:
      name: letsencrypt-prod
    
    # HTTP-01 challenge solver
    solvers:
    - http01:
        ingress:
          class: nginx

